Market loc_nothingthere_village:
  offers:
    - item: item_fish
      resource: gold
      buy_value: 15
      sell_value: 6
    - item: item_herbs
      resource: gold
      sell_value: 8
    - item: item_fishing_rod
      resource: gold
      buy_value: 25
    - item: item_linen_jacket
      resource: gold
      buy_value: 30
  travel_actions:
    - { to: loc_nothingthere_coast }
    - { to: loc_nothingthere_forest }
  local_actions:
    - nothingthere_job
    - nothingthere_village_elder_dialogue

Location loc_nothingthere_coast:
  travel_actions:
    - { to: loc_nothingthere_village }
  local_actions:
    - nothingthere_fish
    - nothingthere_gather_stones

Location loc_nothingthere_forest:
  travel_actions:
    - { to: loc_nothingthere_village }
  local_actions:
    - nothingthere_forest_herbs
    - nothingthere_rat_hunt
    - nothingthere_forest_explore

Action nothingthere_village_elder_dialogue:
  event: nothingthere_dialogue_init

ActiveStateMachineInitEvent nothingthere_dialogue_init:
  machine: nothingthere_dialogue

ActiveStateMachine nothingthere_dialogue:
  initial: nothingthere_dialogue_root
  allowed_action_groups: 
    - action_group_help
    - action_group_info
    - action_group_admin

ActiveState nothingthere_dialogue_root:
  actions:
    - nothingthere_dialogue_exit
    - nothingthere_dialogue_about
    - nothingthere_dialogue_who

Action nothingthere_dialogue_exit:
  event: nothingthere_dialogue_exit_event

ActiveStateMachineExitEvent nothingthere_dialogue_exit_event:
  machine: nothingthere_dialogue

Action nothingthere_dialogue_about:
  event: nothingthere_dialogue_about_event

InfoEvent nothingthere_dialogue_about_event: {}

Action nothingthere_dialogue_who:
  event: nothingthere_dialogue_who_event

InfoEvent nothingthere_dialogue_who_event: {}

Action nothingthere_job:
  costs:
    - resource: action_points
      cost: 1
  event: nothingthere_job_event

ResourceChangesEvent nothingthere_job_event:
  resource_changes:
    - resource: gold
      value: 5

Action nothingthere_fish:
  costs:
    - resource: action_points
      cost: 1
  requirements:
    - fishing_rod_equipped_req
  event: nothingthere_fish_event

ItemEquippedRequirement fishing_rod_equipped_req:
  item: item_fishing_rod

ItemReceiveEvent nothingthere_fish_event:
  item_factory:
    item: item_fish
    stack: 1

Action nothingthere_forest_herbs:
  costs:
    - resource: action_points
      cost: 1
  event: nothingthere_forest_herbs_event

SkillTestEvent nothingthere_forest_herbs_event:
  success: nothingthere_forest_herbs_success
  failure: nothingthere_forest_herbs_failure
  test:
    skill: herbalism
    difficulty: 1
    tester: default_tester

ItemReceiveEvent nothingthere_forest_herbs_success:
  item_factory:
    item: item_herbs
    stack: 1

InfoEvent nothingthere_forest_herbs_failure: {}

Action nothingthere_rat_hunt:
  costs:
    - resource: action_points
      cost: 1
  event: rat_hunting_event

FightEvent rat_hunting_event:
  enemy_factories:
    - forest_rat_factory
  fight_engine: fight_engine

Action nothingthere_gather_stones:
  costs:
    - resource: action_points
      cost: 1
  event: nothingthere_gather_stones_event

ItemReceiveEvent nothingthere_gather_stones_event:
  item_factory:
    item: item_stones
    stack: 1

Action nothingthere_forest_explore:
  costs:
    - resource: action_points
      cost: 2
  event: nothingthere_forest_explore_event

ChanceEvent nothingthere_forest_explore_event:
  chance: 0.2
  if_: nothingthere_forest_wolves_attack_event
  else_: nothingthere_forest_explore_nothing_event

FightEvent nothingthere_forest_wolves_attack_event:
  enemy_factories:
    - wolf_factory
    - wolf_factory
  fight_engine: fight_engine

InfoEvent nothingthere_forest_explore_nothing_event: {}
